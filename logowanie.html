<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="logowaniestyl.css">
    <title>Book World</title>
</head>
<body>

    <main id="log">
        <h1>Zaloguj się</h1>
        <input type="text" id="login" placeholder="Login" />
        <input type="password" id="haslo" placeholder="Hasło" />
        <div>
            <input type="checkbox" id="remember" />
            <label for="remember">Zapamiętaj mnie</label>
        </div>
        <button id="zaloguj">Zaloguj</button>

        <!-- POCZĄTKOWE POŁOŻENIE „POWRÓT” JEST ZAŁADOWANE SKRYPTEM  -->
        <button id="backButton" class="back-button">
            <img src="https://cdn-icons-png.flaticon.com/128/3585/3585896.png" alt="Powrót" width="20" />
            Powrót
        </button>
    </main>

    <!--  SKRYPT UCIEKAJĄCEGO PRZYCISKU  -->
    <script>
        const backButton = document.getElementById("backButton");
        const loginBtn = document.getElementById("zaloguj");

        /*  STALE STERUJĄCE  */
        const SAFE_RADIUS = 120;   // odległość, przy której guzik zaczyna uciekać (px)
        const EDGE_PADDING = 10;    // margines od krawędzi ekranu (px)

        /*  ROZSTAWIENIE GUZIKA POD PRZYCISKIEM LOGOWANIA  */
        window.addEventListener("load", () => {
            const rect = loginBtn.getBoundingClientRect();
            backButton.style.left = rect.left + "px";
            backButton.style.top = rect.bottom + 10 + "px"; // 10‑px odstęp
        });

        /*  KLIK = NORMALNY POWRÓT W HISTORII  */
        backButton.addEventListener("click", () => history.back());

        /*  GŁÓWNA LOGIKA UCIEKANIA  */
        document.addEventListener("mousemove", ev => {
            const rect = backButton.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            const dx = ev.clientX - centerX;
            const dy = ev.clientY - centerY;
            const distance = Math.hypot(dx, dy);

            /*  Jeżeli kursor zbliżył się za bardzo → LOSOWA UCIECZKA  */
            if (distance < SAFE_RADIUS) {
                const maxLeft = window.innerWidth - rect.width - EDGE_PADDING;
                const maxTop = window.innerHeight - rect.height - EDGE_PADDING;

                const newLeft = Math.random() * maxLeft + EDGE_PADDING;
                const newTop = Math.random() * maxTop + EDGE_PADDING;

                backButton.style.left = newLeft + "px";
                backButton.style.top = newTop + "px";
            }
        });
    </script>
</body>
</html>